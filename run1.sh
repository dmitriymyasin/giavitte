#!/bin/bash
# run.sh

echo "üöÄ –ó–∞–ø—É—Å–∫ –ø–æ—Ä—Ç–∞–ª–∞ '–ë—É–∫–≤–æ–µ–∂–∫–∞'..."

# –°–æ–∑–¥–∞–µ–º –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç
if [ ! -d "venv" ]; then
    echo "–°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è..."
    python3 -m venv venv
fi

# –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
source venv/bin/activate

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
echo "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π..."
pip install -r requirements.txt

# –°–∫–∞—á–∏–≤–∞–µ–º Bootstrap —Ñ–∞–π–ª—ã –µ—Å–ª–∏ –∏—Ö –Ω–µ—Ç
if [ ! -f "static/css/bootstrap.min.css" ] || [ ! -f "static/js/bootstrap.bundle.min.js" ]; then
    echo "–°–∫–∞—á–∏–≤–∞–Ω–∏–µ Bootstrap —Ñ–∞–π–ª–æ–≤..."
    python download_bootstrap.py
fi

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
echo "–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö..."
python init_db.py

# –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
echo "–ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è..."
echo ""
echo "=========================================="
echo "üåê –°–µ—Ä–≤–µ—Ä –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É:"
echo "   http://localhost:5000"
echo ""
echo "üîë –¢–µ—Å—Ç–æ–≤—ã–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:"
echo "   –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä:"
echo "      –õ–æ–≥–∏–Ω: admin"
echo "      –ü–∞—Ä–æ–ª—å: bookworm"
echo ""
echo "   –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:"
echo "      –õ–æ–≥–∏–Ω: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å1"
echo "      –ü–∞—Ä–æ–ª—å: password123"
echo "=========================================="
echo ""
python app.py